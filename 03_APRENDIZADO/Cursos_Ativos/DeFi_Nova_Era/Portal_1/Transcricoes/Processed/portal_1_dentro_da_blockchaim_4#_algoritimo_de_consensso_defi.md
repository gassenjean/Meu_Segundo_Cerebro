# portal 1 dentro da blockchaim 4# algoritimo de consensso [defi]

Saudações, defazeras e defazeras. Vamos aqui para a aula de algoritmo de consenso. Como
que a blockchain tem consenso, como é que os mineradores concordam entre si, que tá tudo
ok, que tá tudo certo. Vamos entender como é que funciona isso também na prática além da
teoria, como sempre. Tá bom? Então, ó, devagar e sempre, tá? Uma aulinha de cada vez, um
portal de cada vez. Se tá tendo dúvida, vai lá no nosso chat de suporte. Já falei pra você como
é que funciona ali o nosso Discord. Vai lá, tira dúvida. Tem as lives de tirar dúvidas também.
Tirem as suas dúvidas. A gente tá aqui pra ajudar de fato, tá? Um pouquinho de cada vez.
Respira, vai fazendo anotação, anotando as dúvidas pra gente tirar isso nas lives de tirar
dúvidas e também no chat de suporte, tá bom? Então vamos lá, meus queridos e quer Aqui a
gente traz uma analogia muito interessante do famoso problema dos generais bizantinos,
tá? O que é isso, meus queridos e queridas? Galera, aqui tem um exemplo muito prático.
Imagine, naquela época em que os generais bizantinos iriam atacar um castelo. Só que o
castelo era gigantesco, a gente tinha que atacar por trás, pela frente, pelos lados, pra gente
conseguir, de fato, derrubar, invadir o castelo e dar tudo certo. Só que, entretanto, todavia, o
que que me impede, né? Eu sou o general, eu que tô aqui atrás do castelo. O que que impede
o general que tá lá na frente do castelo fugir? Se ele fugir, a gente vai perder o ataque,
porque todo mundo precisa atacar junto pra gente conseguir vencer a guerra. Só que se eu
não sei se o general que tá lá na frente do castelo ou que tá no outro lado, como que eu sei
que ele também vai atac E aí que a gente traz essa analogia pra dentro do mercado do cripto,
que é a mesma coisa. Como é que a gente vai entrar em consenso? E aí a gente entra no que
chamamos os algoritmos de consenso. Porque de nada adianta. O minerador A propõe
alguma coisa, o minerador B propõe outra, o outro propõe outra, ninguém chega em
consenso e o consenso faliu. A rede não entra em consenso, nada é validado, não existe, não
existe rede. Então, meus queridos e queridas, surgiu o que nós chamamos, de uma forma
muito inteligente, desse algoritmo de consenso, chamado Proof of Work, ou, em português,
prova de trabalho, tá? Que é uma forma em que você gasta energia computacional,
provando que você gastou energia computacional pra achar o número, ser eleito do bloco, e
aí a coisa entrar em consenso. Como todo esse processo funciona Vamos lá então. A ideia,
ela começa aqui, certo? Temos os mineradores. O minerador 1, o minerador 2 e o minerador 3. Vamos levar isso como uma base aqui do nosso exemplo, tá? 1, 2 e 3. Três mineradores
aqui. Quando uma transação acontece lá na rede, as pessoas estão negociando, o que os
mineradores vão fazer? Vão juntar tudo isso em um único bloco, vão validar e tal e depois
vão propagar. Só que, para que o minerador seja eleito para minerar o bloco, tô aqui de boa,
tô com o meu PC conectado lá, como que eu vou ganhar um bloco? Como que eu vou ser
eleito para minerar aquele bloco? Pra mim ganhar essa recompensa de Bitcoin. Você precisa
resolver um problema matemático. A fórmula do problema matemático é essa aqui. E o
número, o resultado disso daqui, é o que nós chamamos de mouse. Lembra lá naquele site
que eu mostrei pra vocês, a letrinha lá, o mouse? Esse é o número que o minerador tem que
achar para que ele seja eleito a minerar o bloco. Por isso que na mineração, é uma
competição entre os mineradores, para quem achar o número mais rápido, vai ser o eleito a
minerar o bloco. E aí que nós temos essa força computacional, porque o que que a força
computacional, o que que essas placas, essas ferramentas de mineração ficam fazendo?
Ficam tentando adivinhar o código, tenta ativar o erro, fica lá... trabalhando, para que
consiga achar o mouse. Quem achar o náusea primeiro, né, resolveu o problema. Quem
achar o náusea primeiro é eleito para minerar o bloco e ganhar as recompensas de Bitcoin.
Que lá no início eram 50, depois há 4 anos virou 25, depois de 4 anos foi cortado pela
metade, virou 2, depois 6, 3 e vai continuar assim até 2100 e pouquinho, tá? Então, ele
ganha a recompensa de Bitcoin se ele é o minerador daquele bloco. Para ele ser o minerador
daquele bloco, ele precisa achar o náusea, que é um problema matemático que a rede do
Bitcoin, o código, o programa do Bitcoin envia para ele. Ele resolve esse problema, o
primeiro que resolver é eleito para receber as recompensas. Então, nesse exemplo, o
minerador 1 errou, não conseguiu achar. O minerador 2 conseguiu achar. Logo, ele é eleito
para minerar aquele bloco e receber, de fato, as recompensas de Bitcoin que estão ali. Isso é
o proof of work, a prova de trabalho, porque é gasto energia computacional para que você
ache o não-se e seja o minerador. Por isso que precisa de energia, por isso que se chama
prova de trabalho, porque você está provando, Gás energético, você tá trabalhando ali, né,
pra conseguir achar aquele número. Isso, inclusive, dá muita margem de credibilidade pro
Bitcoin. Quem fala que não tem valor intrínseco e tudo mais, tá tendo um gás energético pra
você produzir Bitcoins, certo? Não é que nem o dinheiro da moeda fiduciária, que você
aperta um botão, eles imprimem lá, né? Então, tem tudo isso que é muito importante o
conceito de você entender. Essa é a prova de trabalho pro Fofork. Vai ter outros projetos no
mercado cripto que vai utilizar a prova de trabalho? Pouquíssimos. Pouquíssimos. O
principal e rei é o Bitcoin, certo? Resumindo a prova de trabalho, então. Temos aqui a
transação, certo? A transação aqui, ela acontece. Ela chega lá pra rede do minerador, certo?
O minerador precisa pegar esse bloco, propor o bloco. Pra que ele propor o bloco, ele
precisa resolver o problema. Pra resolver o problema, ele gera uma prova de trabalho. Aí ele
ganha o bloco, adiciona as transações, fica tudo bonitinho. E aí quando ele faz tudo isso, ele
vai fazer o quê? Ele vai propagar. Lembra que eu falei pra vocês que existe mais de 23 mil
nós, vários pontos de conexão na rede do Bitcoin? Esses pontos se conversam. É uma rede
P2P descentralizada, em que uma vez que é proposto ali o bloco, aquilo é finalizado. Isso é
propagado entre todos esses 23 mil nós para que todo mundo diga, beleza, está ok. Porque
todo mundo salva uma cópia daquele livro Razão da blockchain do Bitcoin. O minerador,
certo? Então é propagado pela rede, todo mundo vai ver aquilo e vai falar, beleza, todo
mundo eu falo, eu sou os programas, os pontos de conexão, o programa que tá rodando.
Então vai visualizar aquilo e vai falar, beleza, tá tudo ok. E aí a rede faz o quê? Entra em
consenso que tá tudo certo e segue. Foi gerada uma prova de trabalho, teve um gasto
computacional, está certo, está validado, foi propagado, todo mundo validou, adicionado no
blockchain, um bloco após o outro, esse processo acontece e por isso que é imutável e
mágico, certo? Aqui temos a mineração na prática, que eu até me empolguei na aula passada
e mostrei pra vocês que já era praticamente a mineração na prática, que nós fizemos aqui.
Então não vou ser redundante e mostrar de novo, mas nada menos, nada mais, eu vou
mostrar que é justamente isso. Se a gente tem aqui Vamos minerar o bloco 1, vamos
minerar o bloco 2, minerar o bloco 3, minerar o bloco 4 aqui com algumas informações. Se a
gente vem aqui e altera alguma informação nesse bloco, tudo acaba sendo invalidado.
Beleza, meus queridos e queridas? Então a mineração na prática meio que já acabou
acontecendo. E aqui ó, pra mostrar ainda melhor esse ponto aqui, vocês estão vendo? Aqui
ó. Cara, são muitas transações, então por isso ó, transação 1, transação 2, faz um hash, faz
um hash. Pra pegar, vamos dizer que teve 100 transações, 200 transações lá na rede, racheia
e racheia, faz um hash das duas coisas. E aí, pra ir no cabeçalho do bloco, pra gerar o hash
raiz, que representa todas as informações, transações, daquele bloco, é feito o hash raiz, que
vai pegar o quê? Todas as informações que estão abaixo aqui, que vai ser gerado, né, na
árvore Merkle. O que você precisa entender é justamente esse hash raiz. Todas essas ações
de informação escritas no bloco geram essa hash de every miracle e essa é a hash do bloco.
Junto com a hash do bloco vai estar o nulls, que é justamente aquele número que o
minerador descobriu para minerar o bloco, e o ponto anterior, o exclusivo do hash anterior,
para que tenha a ligação. Certo? Então, essa é a estrutura do bloco, das funções e como elas
vão se conectando e se conversando. Certo? Deixa eu te dar aqui um pouco agora, tá? Mas,
na frente, nós temos um outro algoritmo de consenso que chama-se prova de aposta. Ou,
como você vai ver muito por aí também, o famoso Proof of Stake. Prova de aposta, Proof of
Stake. Prova de trabalho, Proof of Work. A gente vai avaliar altcoins e tudo mais, você vai
ver que a maioria das altcoins hoje trabalham dentro desse processo de Proof of Stake.
Prova de aposta. O que significa isso? Prova de aposta, como o próprio nome já diz, é
apostar. Você vai travar os seus tokens daquele projeto, suas criptomoedas daquele projeto,
e você vai estar ajudando na validação da rede dessa forma. Como assim? Vamos lá. Vamos
pegar o exemplo da blockchain mais conhecida, o Ethereum. Ethereum, Proof of Stake, hoje
lá, tudo bonitinho. Você que é o dono dos seus etéreos, vamos dizer que você quer ajudar na
validação da rede. Eu quero ir lá ajudar a validar os blocos e tudo mais. É um processo
complicado que você vai aprender em outros portais aqui dentro do DeFi Versus. Fica
tranquilo se você quer aprofundar ainda mais. Você vai aprender em outros portais aqui, tá?
Mas aqui é pra você entender o conceito. Então você vai pegar as suas moedas, certo? E vai
trancar elas em um contrato, em um cofre. Vamos usar o conceito de cofre primeiro pra
depois a gente cair pra contrato inteligente. Vai trancar elas num cofre. Um cofre exclusivo
daquela blockchain. Quando você faz isso, você tá apostando as suas moedas que você vai
validar a blockchain corretamente. Você também vai baixar um programa, vai baixar um
negócio no seu computador ali, tudo bonitinho. Só que você não vai precisar dessas
máquinas do Bitcoin, porque como eu falei, na mineração é competição. No Proof of Stake, já
é mais colaboração e algoritmo randômico que acaba escolhendo aquele validador para ser
o minerador daquele bloco, eleito a pegar aquele bloco, tá? Então eu, que sou o dono dos
meus headers, eu vou trancar os headers, vou apostar esses headers e o algoritmo do Proof
of Stake, ele é randômico, ele vai escolher um validador com base em quanto tempo ele tá
validando aquela rede, se ele já validou alguma vez errado, se ele já cometeu algum erro. Na
blockchain, se você comete algum erro, um validador, por exemplo, vamos dizer que eu sou
um falastrão e quero fazer alguma coisa errada. Se você faz isso, age de má fé dentro da
blockchain, você toma o que nós chamamos de slash, tá? O slash é a perda das criptomoedas
apostadas, certo? Então, aqui é que tá um pouco da segurança do conceito. Tô apostando as
minhas criptos, se eu fizer alguma coisa errada aqui, você perde, você toma um slashing das
suas criptomoedas, você perde as criptomoedas que foram apostadas. Por isso que existe
um incentivo para que você valide corretamente, porque você está proof of stake, você está
com a prova de aposta, você está apostando. Então, o processo do Proof of Stake é, tranca as
moedas, o algoritmo da rede vai escolher um validador, o validador vai propor o bloco, as
transações serão adicionadas no bloco, o bloco vai ser propagado pela rede, vai ser
adicionado à rede. Agora, presta atenção, defazer e defazer. No Bitcoin, no Proof of Work,
você tem a recompensa do Bitcoin para o minerador. No Proof of Stake, vai depender de
protocolo para protocolo, Ethereum, Solana, Cardano, Avalanche, C, Sui, tem uma cacetada
de blockchain, depende do protocolo. Por via de regra, a maioria dos protocolos, eles
também distribuem as taxas de gás pagas pela galera. Então, a gente vai fazer tudo isso na
prática depois, tá? Estou ali transacionando, eu sou o validador da rede Proof of Stake,
prova de aposta. As taxas de gás que foram pagas nas transações, eu também vou ganhar
aqui na rede do Bitcoin também, só que você ganha recompensa em BTC. Já na rede Proof-
of-Stake, ele é um modelo diferente, não tem esse incentivo direto, são as taxas que estão
sendo pagas ali por transações que acabam dando ali pro validador a forma monetária.
Como são transações mais complexas do que o Bitcoin, as pessoas pagam taxas de gás
maiores, o que acaba incentivando também o validador a continuar ativo na rede, apostando
as suas moedas, validando a blockchain, deixando aquilo seguro. Certo? Então, lá em outros
portais, você vai aprender que existem duas formas de stake. A gente vai fazer aqui na
prática uma delas, que é uma, você delegar, ou seja, eu vou pegar os meus Ethereum, vou
delegar ele para um contrato, para uma empresa no mercado cripto que faz o Proof of Stake
do Ethereum, e vou ganhar uma rentabilidade com isso. Ou, eu vou pegar o sistema, o
software do Ethereum, trancar as moedas, e aí eu vou estar conectado direto e ser um
validador. É complexo, é caro, não vale a pena, mas você vai aprender a fazer em outros
portais que a gente vai ter aqui no DeFi Versus. Primeiro, foco nesse portal aqui, no
processo de informação do DeFi Zero. Depois os outros portais serão liberados, tá?
Primeiro, foco aqui comigo. Fechou? Então, essa é a prova de aposta. A grande diferença da
prova de aposta e prova de trabalho. Vai estar sendo mostrado aqui no slide. A prova de
trabalho, o Proof of Work, ele é uma competição que você tem pra ver quem acha o número
mais rápido no mouse. Já o Proof of Stake, ele é a participação. Certo? Quanto mais moedas,
quanto mais tempo eu tiver aqui. Certo? A questão do ataque da segurança, no Bitcoin você
precisa ter 151% do poder computacional da rede pra que você consiga... tentar infringir
alguma coisa que tenha de fato um ataque, certo? E, na rede do Proof-of-Stake, você precisa
ter 51% do supply do projeto como um todo. É muita coisa. Ou seja, ambas formas são
praticamente impossíveis, extremamente caras, de você conseguir fazer um ataque, certo?
Por isso que é extremamente seguro. No Proof-of-Work, você é recompensado pelo
trabalho, pelo poder computacional gasto. No Proof-of-Stake, pela validação das taxas que
estão sendo pagas pelos usuários daquela rede. Essa é a grande diferença entre Proof-of-
Work e Proof-of-Stake. Algoritmo de consenso, entendemos, entendemos a prática,
entendemos a mineração na prática, entendemos como é o funcionamento desde a
transação até chegar no minerador, o que o minerador precisa fazer, depois que o
minerador faz isso, como isso é propagado e colocado na rede, então tudo isso é um sistema
que se conversa, certo? Essa é a blockchain do Bitcoin, o modelo algoritmo de consenso do
Bitcoin, como as coisas funcionam e a segurança. Entendido o algoritmo de consenso,
podemos finalizar essa aula e entender um dos últimos conceitos do Bitcoin, que é aquilo
que a gente falou no comecinho, que são os UTXOs, tá? Então, te espero na próxima aula.
